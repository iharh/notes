https://github.com/kanashimia/nixos-config/blob/mistress/lib.nix
