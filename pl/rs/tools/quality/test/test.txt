#[cfg(test)]
mod tests {
    use super::*;
    ...
    #[test]
    fn test1() {
    }
    ...
}

reddit:
https://www.reddit.com/r/rust/comments/5jbezo/testing_frameworks/

vars:
RUST_TEST_THREADS=1
