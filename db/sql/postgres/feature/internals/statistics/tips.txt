*************************************************************
Сегодня у нас будет простой, но очень полезный запрос. Этот запрос позволит нам посмотреть статистику таблицы в PostgreSQL. Но не ту статистику, которая полезна для планировщика запросов в PostgreSQL, т.е. кол-во строк и прочие технические вещи, а статистику по использованию таблицы.

Т. е. мы увидим сколько строк было вставлено в таблицу, сколько удалено и сколько обновлено. Такая информация может быть нам полезна для оценки интенсивности работы с таблицей и принятия решения об оптимизации работы с ней, переносе таблицы на более быстрый диск, например.

Запрос будет следующим:

SELECT relname, n_tup_ins "Total Inserts", 
n_tup_upd "Total Updates", 
n_tup_del "Total Deletes" 
FROM pg_stat_user_tables WHERE
      relname='имя_таблицы';

Здесь:

pg_stat_user_tables - представление, которое содержит информацию по статистике пользовательских, не системных таблиц;

n_tup_ins, n_tup_upd и n_tup_del - кол-во вставленных, обновленных и удаленных строк соответственно.

Вот таким нехитрым способом мы можем быстро оценить на сколько сильно загруженная таблица в PostgreSQL.
